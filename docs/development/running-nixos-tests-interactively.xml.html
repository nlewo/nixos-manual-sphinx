
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Running Tests interactively &#8212; NixOS Manual  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Testing the Installer" href="testing-installer.xml.html" />
    <link rel="prev" title="Running Tests" href="running-nixos-tests.xml.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="running-tests-interactively">
<span id="sec-running-nixos-tests-interactively"></span><h1>Running Tests interactively<a class="headerlink" href="#running-tests-interactively" title="Permalink to this headline">Â¶</a></h1>
<p>The test itself can be run interactively. This is particularly useful when
developing or debugging a test:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ nix-build nixos/tests/login.nix -A driver$ ./result/bin/nixos-test-driver
starting VDE switch for network 1&gt;
</pre></div>
</div>
<p>You can then take any Python statement, e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">start_all</span><span class="p">()</span><span class="o">&gt;</span> <span class="n">test_script</span><span class="p">()</span><span class="o">&gt;</span> <span class="n">machine</span><span class="o">.</span><span class="n">succeed</span><span class="p">(</span><span class="s2">&quot;touch /tmp/foo&quot;</span><span class="p">)</span><span class="o">&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">machine</span><span class="o">.</span><span class="n">succeed</span><span class="p">(</span><span class="s2">&quot;pwd&quot;</span><span class="p">))</span> <span class="c1"># Show stdout of command</span>
</pre></div>
</div>
<p>The function <strong class="command">test_script</strong> executes the entire test script
and drops you back into the test driver command line upon its completion.
This allows you to inspect the state of the VMs after the test (e.g. to debug
the test script).</p>
<p>To just start and experiment with the VMs, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ nix-build nixos/tests/login.nix -A driver$ ./result/bin/nixos-run-vms
</pre></div>
</div>
<p>The script <strong class="command">nixos-run-vms</strong> starts the virtual machines
defined by test.</p>
<p>The machine state is kept across VM restarts in
<code class="file docutils literal notranslate"><span class="pre">/tmp/vm-state-```machinename`</span></code>.</p>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">NixOS Manual</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../preface.xml.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/installation.xml.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/configuration.xml.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../administration/running.xml.html">Administration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="development.xml.html">Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="sources.xml.html">Getting the Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing-modules.xml.html">Writing NixOS Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="building-parts.xml.html">Building Specific Parts of NixOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing-documentation.xml.html">Writing NixOS Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="building-nixos.xml.html">Building Your Own NixOS CD</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="nixos-tests.xml.html">NixOS Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing-installer.xml.html">Testing the Installer</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.xml.html">Releases</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../generated/options-db.xml.html">Configuration Options</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="development.xml.html">Development</a><ul>
  <li><a href="nixos-tests.xml.html">NixOS Tests</a><ul>
      <li>Previous: <a href="running-nixos-tests.xml.html" title="previous chapter">Running Tests</a></li>
      <li>Next: <a href="testing-installer.xml.html" title="next chapter">Testing the Installer</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;1970, lewo.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/development/running-nixos-tests-interactively.xml.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>